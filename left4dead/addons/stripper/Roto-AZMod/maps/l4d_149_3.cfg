; Harry Modify 2022

; =====================================================
; ===============  PILL CABINET TWEAK  ================
; =====================================================
; --- set pill cabs to have a max of 1 pill
modify:
{
	match:
	{
		"model" "models/props_interiors/medicalcabinet02.mdl"
	}
	replace:
	{
		"HealthCount" "1"
	}
}

add:
; ammo
{
	"solid" "6"
	"origin" "8913 9905 -1408"
	"angles" "0 109 0"
	"model"	 "models/props/terror/ammo_stack.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "11113 7126 -1328"
	"angles" "0 19 0"
	"model"	 "models/props_unique/spawn_apartment/coffeeammo.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "12412 5021 -1472"
	"angles" "0 136 0"
	"model"	 "models/props_unique/spawn_apartment/coffeeammo.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "10417 2603 -1560"
	"angles" "0 -95 0"
	"model"	 "models/props/terror/ammo_stack.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

; weapons
{
	"solid" "6"
	"origin" "9035 9846 -1406"
	"angles" "0 4 270"
	"classname" "weapon_rifle_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "5"
}

{
	"solid" "6"
	"origin" "9005 9963 -1406"
	"angles" "0 35 270"
	"classname" "weapon_autoshotgun_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "5"
}
; objects
{
	"solid" "6"
	"origin" "9807 8019 -1369"
	"angles" "0 -35 0"
	"model"	 "models/props_vehicles/pickup_truck_2004.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10201 8206 -1342"
	"angles" "-4 -4 0"
	"model"	 "models/props_vehicles/pickup_truck_78.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10252 7890 -1338"
	"angles" "0 -10 0"
	"model"	 "models/props_vehicles/floodlight_generator_nolight.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "7845 7955 -1263"
	"angles" "0 -43 0"
	"model"	 "models/props_vehicles/flatnose_truck_wrecked.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "7592 8145 -1328"
	"angles" "0 112 0"
	"model"	 "models/props_vehicles/longnose_truck.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "8503 7900 -1379"
	"angles" "363 138 0"
	"model"	 "models/props_vehicles/van.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "8503 7900 -1379"
	"angles" "363 138 0"
	"model"	 "models/props_vehicles/van_glass.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "8765 8111 -1348"
	"angles" "365 132 -7"
	"model"	 "models/props_vehicles/pickup_dually.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "8765 8111 -1348"
	"angles" "365 132 -7"
	"model"	 "models/props_vehicles/pickup_dually_glass.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "11383 2600 -1600"
	"angles" "0 88 0"
	"model"	 "models/props/de_nuke/crate_small.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "11297 2588 -1600"
	"angles" "0 -90 0"
	"model"	 "models/props/de_nuke/crate_extralarge.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10426 2488 -1600"
	"angles" "0 -112 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10529 2455 -1600"
	"angles" "0 -87 0"
	"model"	 "models/props/cs_assault/box_stack1.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10421 2454 -1600"
	"angles" "0 -103 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10420 2463 -1561"
	"angles" "0 -105 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "10421 2470 -1522"
	"angles" "0 -104 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}



; kill once survivors turn on the power
{
	"solid" "6"
	"origin" "9743 6377 -1340"
	"angles" "270 -179 0"
	"model"	 "models/props_interiors/handrail_hospital01_256.mdl"
	"classname"	"prop_dynamic"
	"targetname" "Harry_object"
}

{
	"solid" "6"
	"origin" "9246 6379 -1340"
	"angles" "270 900 0"
	"model"	 "models/props_interiors/handrail_hospital01_256.mdl"
	"classname"	"prop_dynamic"
	"targetname" "Harry_object"
}

; infected ladder
{
    "classname" "func_simpleladder"
    "origin" "423.68 134.89 -165.96"
    "angles" "0.00 0.00 0.00"
    "model" "*118"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "1800.05 -3311.42 3.03"
    "angles" "0.00 18.00 0.00"
    "model" "*159"        
    "normal.x" "-0.97"
    "normal.y" "-0.23"
    "normal.z" "0.00"
    "team" "2"
}


filter:
; remove end saferoom kits
{
	"hammerid" "2804"
}
{
	"hammerid" "2803"
}
{
	"hammerid" "2805"
}
{
	"hammerid" "2802"
}

; unbreakable door
;{
;	;"origin" "9436 7068 -1328"
;	"hammerid" "2716"
;}
;{
;	;"origin" "11196 6724 -1276"
;	"hammerid" "3007"
;}
;{
;	;"origin" "11168 6176 -1548"
;	"hammerid" "2343"
;}
;{
;	;"origin" "12372 4444 -1472"
;	"hammerid" "2824"
;}
; broken infected ladder
{
	;"model" "*160"
	"hammerid" "3693"
}
{
	;"model" "*162"
	"hammerid" "3697"
}

; --- Remove item spawns in bad locations or excessive density in a location
; by harry
{
	"hammerid" "3174"
}
{
	"hammerid" "3068"
}
{
	"hammerid" "3086"
}
{
	"hammerid" "3088"
}

modify:
; remove Harry_object once survivors turn on the power
{
	match:
	{
		;"origin" "9984 7072 -1284"
		"targetname" "power_on"
		"classname" "logic_relay"
	}
	delete:
	{
		"OnTrigger" "rotating_door,Open,,0,-1"
	}
	insert:
	{
		"OnTrigger" "Harry_object,Kill,,30,1"
		; extend door open event (from 0s => 30s)
		"OnTrigger" "rotating_door,Open,,30,-1"
	}
}

; hittable
{
	match:
	{
		;"origin" "8576 6540 -1344"
		"model" "models/props/cs_assault/forklift.mdl"
		"hammerid" "2555"
		"classname" "prop_dynamic_override"
	}
	replace:
	{
		"classname" "prop_physics"
	}
}
{
	match:
	{
		;"origin" "10456 2171.09 -1599.79"
		"model" "models/props_vehicles/generatortrailer01.mdl"
		"hammerid" "2409"
		"classname" "prop_dynamic_override"
	}
	replace:
	{
		"classname" "prop_physics"
	}
}

