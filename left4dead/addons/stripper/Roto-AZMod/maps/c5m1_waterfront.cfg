; This map is part of left4deadDLC4-l4d2onl4d1

; Harry modify 2023
filter:
; remove ammo and use our own settings
{
	"classname" "weapon_ammo_spawn"
}

; remove terrible pistol spawn density
{
	"classname" "weapon_pistol_spawn"
}

; l4d2 official
add:
; ammo
{
    "origin" "-4400 -1168 -344"
    "spawnflags" "2"
    "solid" "6"
    "skin" "0"
    "model" "models/props/terror/ammo_stack.mdl"
    "count" "5"
    "body" "0"
    "angles" "0 300 0"
    "classname" "weapon_ammo_spawn"
}
; pistol
{
	"origin" "-1590.37 -2008.97 -331.442"
	"spawnflags" "0"
	"solid" "6"
	"skin" "0"
	"disableshadows" "0"
	"count" "5"
	"body" "0"
	"angles" "0 135 -90"
	"classname" "weapon_pistol_spawn"
}
{
	"origin" "-2061.76 -501.869 -335.442"
	"spawnflags" "0"
	"solid" "6"
	"skin" "0"
	"disableshadows" "0"
	"count" "5"
	"body" "0"
	"angles" "0 342.5 -90"
	"classname" "weapon_pistol_spawn"
}
{
	"origin" "-2740.77 -432.255 -322.442"
	"spawnflags" "0"
	"solid" "6"
	"skin" "0"
	"disableshadows" "0"
	"count" "5"
	"body" "0"
	"angles" "0 60 -90"
	"classname" "weapon_pistol_spawn"
}

; from l4d2 the last stand update
; anv_mapfixes
; clip
add:
{
	; _vuln_balconya
	"BlockType" "1"
	"initialstate" "1"
	;"mins" "-48 -192 -76"
	"mins" "-60 -192 -76"
	"maxs" "48 192 76"
	"origin" "-720 -128 -140"
    "classname" "env_player_blocker"
}

{
	; _vuln_balconyb
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-48 -256 -253"
	"maxs" "48 256 253"
	"origin" "-1136 -512 196"
    "classname" "env_player_blocker"
}

{
	; _vuln_balconyc
	"BlockType" "1"
	"initialstate" "1"
	;"mins" "0 0 0"
	"mins" "-15 0 0"
	"maxs" "65 256 150"
	"origin" "-737 -2048 -208"
    "classname" "env_player_blocker"
}

{
	; _vuln_balconyd
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-518 -64 0"
	;"maxs" "0 0 320"
	"maxs" "0 13 320"
	"origin" "-687 -2304 -176"
    "classname" "env_player_blocker"
}

;{
;	; _skybox_shielda
;	"BlockType" "2"
;	"initialstate" "1"
;	"mins" "-176 -5.5 22"
;	"maxs" "175 6.5 94"
;	"origin" "-272 -2055 50"
;    "classname" "env_player_blocker"
;}

{
	; _skybox_shieldd
	"BlockType" "2"
	"initialstate" "1"
	"mins" "-21 -252.5 -147"
	"maxs" "21 252.5 147"
	"origin" "-3948 257 130"
    "classname" "env_player_blocker"
}

;{
;	; _skybox_shieldb
;	"BlockType" "2"
;	"initialstate" "1"
;	"mins" "-277 -115 -138"
;	"maxs" "283 115 100"
;	"origin" "-1543.5 -1855.5 249.6"
;    "classname" "env_player_blocker"
;}

;{
;	; _skybox_shieldc
;	"BlockType" "2"
;	"initialstate" "1"
;	"mins" "-145 -212 -19"
;	"maxs" "165 212 77"
;	"origin" "-2971 -1264 125"
;    "classname" "env_player_blocker"
;}

{
	; _signhop_awning
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-55 -320 -80"
	"maxs" "55 320 216"
	"origin" "-3088 -250 -70.5"
    "classname" "env_player_blocker"
}

{
	; _cliprework_roofandwindows
	"BlockType" "1"
	"initialstate" "1"
	;"mins" "-53 -256 0"
	"mins" "-68 -256 0"
	"maxs" "723 256 365"
	"origin" "-3279 -819 -140.6"
    "classname" "env_player_blocker"
}

{
	; _nav_jukebox
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-20 -14 -88"
	"maxs" "20 14 88"
	"origin" "-1492 -1685 -287"
    "classname" "env_player_blocker"
}

{
	; _nav_outhouse
	"BlockType" "1"
	"initialstate" "1"
	"mins" "0 0 -30"
	"maxs" "60 50 50"
	"origin" "-970.4 -2352 -221.7"
    "classname" "env_player_blocker"
}

{
	; _nav_bienlamps
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-32 -75 0"
	"maxs" "6 75 330"
	"origin" "-664 -835 -184"
    "classname" "env_player_blocker"
}

;{
;	; _rampstep_smoother
;	"BlockType" "0"
;	"initialstate" "1"
;	"mins" "-40 -5 0"
;	"maxs" "40 1 3"
;	"origin" "776 44 -374"
;	;"angles" "0 0 45"
;    "classname" "env_player_blocker"
;}

{
	; _nav_electricalbox
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-35 -4 0"
	"maxs" "28 3 576"
	"origin" "-1392 -252 -374"
    "classname" "env_player_blocker"
}

{
	; _cliprework_balconya
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-398 -54 -17"
	"maxs" "269 44 278"
	"origin" "-2700 -2346 -157"
    "classname" "env_player_blocker"
}

{
	; _cliprework_balconyb
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-161 -47 0"
	"maxs" "186 50 340"
	"origin" "-2937 -2098 -216"
    "classname" "env_player_blocker"
}

{
	; _cliprework_huntergap
    "BlockType" "2"
	"initialstate" "1"
	"mins" "-136 0 0"
	"maxs" "136 17 32"
	"origin" "-40 1408 80"
    "classname" "env_player_blocker"
}

{
	; _permstuck_dropbehindfence
	"BlockType" "0"
	"initialstate" "1"
	"mins" "-226 -7 -104"
	"maxs" "294 41 177"
	"origin" "-982 -2793 144"
    "classname" "env_player_blocker"
}

{
	; _cliprework_unattackable
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-802 -203 0"
	;"maxs" "558 213 832"
	;"origin" "-2446 299 -376"
	"maxs" "558 213 5000"
	"origin" "-2446 299 -188"
    "classname" "env_player_blocker"
}

;{
;	; _ledgehang_startfenceleft
;	"BlockType" "1"
;	"initialstate" "1"
;	"mins" "-16 -48 0"
;	"maxs" "10 48 379"
;	"origin" "589 -142 -251"
;	;"angles" "0 29 0"
;    "classname" "env_player_blocker"
;}

;{
;	; _ledgehang_startfenceright
;	"BlockType" "1"
;	"initialstate" "1"
;	"mins" "-8 -24 0"
;	"maxs" "8 24 360"
;	"origin" "599 45 -232"
;	;"angles" "0 -15 0"
;    "classname" "env_player_blocker"
;}

{
	; _clipgap_fence
	"BlockType" "1"
	"initialstate" "1"
	"mins" "-32 -12 -82"
	"maxs" "32 12 82"
	"origin" "-1740 -1284 -134"
    "classname" "env_player_blocker"
}

; anv_versus
; brush
add:
{
	"targetname" "_losfix_bus"
	"classname" "func_brush"
	"origin" "-868 -1515 -363" 
}
{
	"targetname" "_losfix_van"
	"classname" "func_brush"
	"origin" "-918 -1852 -365" 
}
{
    "classname" "logic_auto"
    "OnMapSpawn" "_losfix_bus,AddOutput,mins -1 -96 -14,0,-1"
    "OnMapSpawn" "_losfix_bus,AddOutput,maxs 1 128 14,0,-1"
    "OnMapSpawn" "_losfix_bus,AddOutput,solid 2,0,-1"

    "OnMapSpawn" "_losfix_van,AddOutput,mins -100 -1 -12,0,-1"
    "OnMapSpawn" "_losfix_van,AddOutput,maxs 100 1 12,0,-1"
    "OnMapSpawn" "_losfix_van,AddOutput,solid 2,0,-1"
}

; clip
;{
;	; _ladder_endbluehouse_clipleft
;	"BlockType" "0"
;	"initialstate" "1"
;	"mins" "3 -3 0"
;	"maxs" "8 16 336"
;	"origin" "-3751 -4 -376"
;	;"angles" "0 55 0"
;    "classname" "env_player_blocker"
;}

{
	; _ladder_endbluehouse_clipwall
	"BlockType" "0"
	"initialstate" "1"
	"mins" "-1 -208 0"
	"maxs" "7 304 331"
	"origin" "-3807 208 -376"
    "classname" "env_player_blocker"
}

{
	; _ladder_endgutterm2mirr_clip
	"BlockType" "0"
	"initialstate" "1"
	"mins" "-4.09 -13 0"
	"maxs" "0 23 338"
	"origin" "-3196 -1079 -376"
    "classname" "env_player_blocker"
}

; ladder (11)
; 1 ladder exists
;{
;	"classname" "func_simpleladder"
;	; _ladder_backpropladder_cloned_waterfrontfence
;	;"model" "-920 438 -304"
;	"origin" "-367 -2821 -8"
;	"angles" "0.00 0.00 0.00"
;    "model" "*18"        
;    "normal.x" "0.00"
;    "normal.y" "1.00"
;    "normal.z" "0.00"
;    "team" "2"
;}

{
	"classname" "func_simpleladder"
	; _ladder_bienville_cloned_brickgutter
	;"model" "-2086 -1984 -216"
	"origin" "1428 1278 -93"
	"angles" "0.00 0.00 0.00"
    "model" "*3"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_boothwindow_cloned_whitetablepath
	;"model" "-2566 -1272 -284"
	"model" "*1"
	"origin" "-572 -4931 0"
	"angles" "0 -90 0"
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_endbluehouse_cloned_waterfrontbrick
	;"model" "-192 78.0956 -216"
	"origin" "-3580 -68 17"
	"angles" "0.00 0.00 0.00"
    "model" "*4"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_endgutterm2mirr_cloned_telephonegutter
	;"model" "-1236 -1274 -213.5"
	"model" "*28"
	"origin" "-4452 -2337 -24"
	"angles" "0 -180 0"
    "normal.x" "0.00"
    "normal.y" "-1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_kitchenelecbox_cloned_telephonegutter
	;"model" "-1236 -1274 -213.5"
	"model" "*28"
	"origin" "-3305 550 -109"
	"angles" "0 90 0"
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_kitchenwindow_cloned_telephonegutter
	;"model" "-1236 -1274 -213.5"
	"model" "*28"
	"origin" "-1282 -1900 -135"
	"angles" "0 -90 0"
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_startroofqol_cloned_whitetablepath
	;"model" "-2566 -1272 -284"
	"model" "*1"
	"origin" "1853 -2855 -5"
	"angles" "0 -90 0"
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_startwtflongright_cloned_startwtflongleft
	;"model" "118 912 -392"
	"origin" "3 -661 0"
	"angles" "0.00 0.00 0.00"
    "model" "*17"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
	"classname" "func_simpleladder"
	; _ladder_tankwaterfront_cloned_telephonegutter
	;"model" "-1236 -1274 -213.5"
	"model" "*28"
	"origin" "-1936 888 0"
	"angles" "0 90 0"
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}
{
	"classname" "func_simpleladder"
	; _ladder_yellowbarriersroof_cloned_alleygutter
	;"model" "-2086 -1984 -216"
	"model" "*3"
	"origin" "-2639 27 18"
	"angles" "0 90 0"
    "normal.x" "0.00"
    "normal.y" "-1.00"
    "normal.z" "0.00"
    "team" "2"
}

; prop
{
	"classname" "prop_dynamic"
    ; _losblocker_boxes
	"model" "models/props/cs_militia/boxes_garage_lower.mdl"
	"origin" "-26 -1108 -375.742"
	"angles" "0 135.5 0"
	"disableshadows" "1"
	"solid" "6"
}

{
	"classname" "prop_dynamic"
    ; _propladder_planka
	"model" "models/props_highway/plywood_01.mdl"
	"origin" "-167 -48 -195.766"
	"angles" "-34 0.6025 -0.3587"
	"solid" "6"
}

{
	"classname" "prop_dynamic"
    ; _propladder_plankb
	"model" "models/props_swamp/plank001b_192.mdl"
	"origin" "-2176 -2538 -320"
	"angles" "0 0 35"
	"solid" "6"
}

{
	"classname" "prop_dynamic"
    ; _ladder_endgutterm2mirr_pipe
	"model" "models/props_downtown/gutter_downspout_straight01.mdl"
	"origin" "-3216 -1056 -89"
	"angles" "0 270 0"
	"disableshadows" "1"
	"solid" "6"
}

{
	"classname" "prop_dynamic"
    ; _ladder_startroofqol_pipe
	"model" "models/props_downtown/gutter_downspout_straight01.mdl"
	"origin" "580 -308 -222"
	"angles" "0 90 0"
    "disableshadows" "1"
	"solid" "6"
}

; patch_ladder
modify:
{
	match:
	{
		;"model" "-2592 -1030 -208"
		"model" "*7"
	}
	insert:
	{
		"origin" "12 -3 0"
	}
}

; PROP:	Trashbin near "_ladder_endbluehouse" moved to improve accessibility.
modify:
{
	match:
	{
		;"origin"     "-3785 22 -376"
		;"classname"   "prop_physics"
		"hammerid"    "1994"
	}
	replace:
	{
		"origin" "-3781 118 -376"
		"angles" "0 17 0"
	}
}

; from l4d2-zonemod
; ############  DIRECTOR AND EVENT CHANGES  ###########
; =====================================================
; ==          DIRECTOR & EVENT MODIFICATION          ==
; ==       Modify director behaviour and events      ==
; =====================================================


; ################  ITEM SPAWN CHANGES  ###############
; =====================================================
; ==           PILL / ITEM / WEAPON SPAWNS           ==
; ==   Remove or change pill, item & weapon spawns   ==
; =====================================================
; --- Ensure a shotgun and SMG always spawn in the room near the start
;modify:
;{
;	match:
;	{
;		"hammerid" "1662914"
;	}
;	replace:
;	{
;		"weapon_selection" "tier1_shotgun"
;	}
;}
;{
;	match:
;	{
;		"hammerid" "1662912"
;	}
;	replace:
;	{
;		"weapon_selection" "any_smg"
;	}
;}

add:
{
	; shotgun
	"solid" "6"
	"origin" "-1387.1 -866.3 -214.442"
	"angles" "0 216.5 90"
	"classname" "weapon_pumpshotgun_spawn"
	"spawnflags" "2"
	"count" "5"
	"disableshadows"	"1"
}
{
	; smg
	"solid" "6"
	"origin" "-1332 -852 -195"
	"angles" "0 300 -90"
	"classname" "weapon_smg_spawn"
	"spawnflags" "2"
	"count" "5"
	"disableshadows"	"1"
}

; =====================================================
; ==                STATIC AMMO PILES                ==
; ==          Add or modify ammo pile spawns         ==
; =====================================================

; =====================================================
; ==                 HITTABLE CHANGES                ==
; ==           Add/remove/modify hittables           ==
; =====================================================


; #############  MAP CLIPPING AND ISSUES  #############
; =====================================================
; ==                 EXPLOITS BLOCKED                ==
; ==      Block intentionally performed exploits     ==
; =====================================================
add:
; --- Block standing under a sign at the start to avoid infected
{
	"classname" "env_player_blocker"
	"origin" "387 64 -314"
	"mins" "-15 -22 -63"
	"maxs" "15 22 63"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from standing on the awning on the left near saferoom
{
	"classname" "env_player_blocker"
	"origin" "192 -436 -44"
	"mins" "-16 -128 -188"
	;"maxs" "16 128 188"
	"maxs" "16 128 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from getting on the burning building near saferoom
{
	"classname" "env_player_blocker"
	"origin" "-427 -128 -34"
	;"mins" "-347.5 -192 -178"
	;"maxs" "347.5 192 178"
	"mins" "-362.5 -192 -178"
	"maxs" "347.5 210 5000"
	"initialstate" "1"
	"BlockType" "1"
}
{
	"classname" "env_player_blocker"
	"origin" "-404 256 -39"
	"mins" "-192 -192 -127"
	;"maxs" "192 192 217"
	"maxs" "192 192 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from getting on the roof next to the bar
{
	"classname" "env_player_blocker"
	"origin" "-1454 -1470 134"
	"mins" "-258 -194 -187.5"
	;"maxs" "258 194 187.5"
	"maxs" "258 194 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from getting on the roof of the blue building opposite the bar
{
	"classname" "env_player_blocker"
	"origin" "-592 -1664 59"
	"mins" "-144 -384 -112.5"
	;"maxs" "144 384 112.5"
	"maxs" "144 384 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from getting on the small roof before the alley
{
	"classname" "env_player_blocker"
	"origin" "-1968 -2622 61"
	"mins" "-180 -258 -260.5"
	;"maxs" "180 258 260.5"
	"maxs" "180 258 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from getting on the roofs around the alley
{
	"classname" "env_player_blocker"
	"origin" "-1952 -1760 124"
	"mins" "-128 -256 -196"
	;"maxs" "128 256 196"
	"maxs" "128 256 5000"
	"initialstate" "1"
	"BlockType" "1"
}
{
	"classname" "env_player_blocker"
	"origin" "-2368 -1728 59"
	"mins" "-201 -329 -140.5"
	;"maxs" "201 329 140.5"
	"maxs" "201 329 5000"
	"initialstate" "1"
	"BlockType" "1"
}
{
	"classname" "env_player_blocker"
	"origin" "-2416 -1312 1"
	"mins" "-144 -96 -200.5"
	;"maxs" "144 96 200.5"
	"maxs" "144 96 5000"
	"initialstate" "1"
	"BlockType" "1"
}
; --- Block survivors from standing on the wall after the kitchen
{
	"classname" "env_player_blocker"
	"origin" "-3208 -240 -52"
	"mins" "-10 -336 -188"
	;"maxs" "10 336 188"
	"maxs" "10 336 5000"
	"initialstate" "1"
	"BlockType" "1"
}

; =====================================================
; ==                  OUT OF BOUNDS                  ==
; ==  Block players getting outside / under the map  ==
; =====================================================
add:
; --- Block area in saferoom above stairs from being accessed via warping / noclip to prevent the round from ending
{
	"classname" "env_player_blocker"
	"origin" "-4016 -1384 -88"
	"mins" "-240 -40 -64"
	"maxs" "240 40 64"
	"initialstate" "1"
	"BlockType" "0"
}

; =====================================================
; ==                   STUCK SPOTS                   ==
; ==  Prevent players from getting stuck in the map  ==
; =====================================================
;add:
; --- Block stuck spot on roof of blue building opposite the bar
;{
;	"classname" "env_player_blocker"
;	"origin" "-384 -2054 108"
;	"mins" "-64 -6 -36"
;	"maxs" "64 6 36"
;	"initialstate" "1"
;	"BlockType" "0"
;}

; =====================================================
; ==                 NUISANCE CHANGES                ==
; ==      Clipping improvements, QOL map changes     ==
; =====================================================
add:
; --- Block items from falling down the small gap in saferoom
;{
;	"classname" "env_player_blocker"
;	"origin" "676 664 -493"
;	"mins" "-4 -152 -11"
;	"maxs" "4 152 11"
;	;"boxmins" "-4 -152 -11"
;	;"boxmaxs" "4 152 11"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;{
;	"classname" "env_player_blocker"
;	"origin" "667 818 -379"
;	"mins" "-13 -2 -103"
;	"maxs" "13 2 103"
;	;"boxmins" "-13 -2 -103"
;	;"boxmaxs" "13 2 103"
;	"initialstate" "1"
;	"BlockType" "4"
;}
{
	"solid" "6"
	"origin" "562.40 818.61 -430.87"
	"angles" "0.00 90.54 450.00"
	"model"	 "models/props_urban/fence_cover001_128.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "545.18 757.99 -485.96"
	"angles" "90.00 0.11 360.00"
	"model"	 "models/props_urban/fence_cover001_256.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "575.18 639.99 -484.96"
	"angles" "90.00 0.11 360.00"
	"model"	 "models/props_urban/fence_cover001_256.mdl"
	"classname"	"prop_dynamic"
}
; --- Clipping at top of ramp in saferoom to prevent getting stuck
{
	"classname" "env_player_blocker"
	"origin" "776 46 -374"
	"mins" "-44 -3 -4"
	"maxs" "44 3 4"
	"initialstate" "1"
	"BlockType" "0"
}
; --- Clipping on trash bags by saferoom to stop players getting stuck as much
{
	"classname" "env_player_blocker"
	"origin" "451 199 -362"
	"mins" "-69 -29 -14"
	"maxs" "69 29 14"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "440 214 -338"
	"mins" "-52 -14 -10"
	"maxs" "52 14 10"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "447 194 -343"
	"mins" "-27 -6 -5"
	"maxs" "27 6 5"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "459 220 -324"
	"mins" "-13 -8 -4"
	"maxs" "13 8 4"
	"initialstate" "1"
	"BlockType" "0"
}
; --- Clipping on group of 3 plant pots that behave like ice
{
	"classname" "env_player_blocker"
	"origin" "76 -176 -341.5"
	"mins" "-20 -21 -1"
	"maxs" "20 21 1"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "76 -55 -341.5"
	"mins" "-20 -21 -1"
	"maxs" "20 21 1"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "77 74 -341.5"
	"mins" "-20 -21 -1"
	"maxs" "20 21 1"
	"initialstate" "1"
	"BlockType" "0"
}
; --- Clipping on bodies behind fence to the left near the start
{
	"classname" "env_player_blocker"
	"origin" "49 -864 -371"
	"mins" "-118 -32 -7"
	"maxs" "118 32 7"
	"initialstate" "1"
	"BlockType" "0"
}
{
	"classname" "env_player_blocker"
	"origin" "49 -862 -358"
	"mins" "-116 -30 -7"
	"maxs" "116 30 7"
	"initialstate" "1"
	"BlockType" "0"
}
; --- Planks behind fences to prevent SI becoming perma-stuck
{
	"classname" "prop_dynamic"
	"origin" "-75 -2738 -328"
	"angles" "0 0 35"
	"model" "models/props_swamp/plank001b_192.mdl"
	"solid" "6"
	"disableshadows" "1"
}
filter:
; --- Remove table and chairs on the balcony opposite the saferoom ramp
{
	;"hammerid" "472733"
	"hammerid" "1888"
}
{
	;"hammerid" "472741"
	"hammerid" "1889"
}
{
	;"hammerid" "1064146"
	"hammerid" "1962"
}
; --- Remove a table in the bar that can fall over when spawning and blocks the doorway
{
	;"hammerid" "461272"
	"hammerid" "1504"
}
; --- Fix LOS on jukebox in bar
add:
{
	"classname" "logic_auto"
	"OnMapSpawn" "losfix_jukebox_bar,AddOutput,mins -18 -11 -32,0,-1"
	"OnMapSpawn" "losfix_jukebox_bar,AddOutput,maxs 18 11 32,0,-1"
	"OnMapSpawn" "losfix_jukebox_bar,AddOutput,solid 2,0,-1"
}
{
	"classname" "func_brush"
	"origin" "-1492 -1684 -344"
	"targetname" "losfix_jukebox_bar"
}
{
	"classname" "env_player_blocker"
	"origin" "-1492 -1684 -344"
	"mins" "-18.1 -11.1 -32.1"
	"maxs" "18.1 11.1 32.1"
	"initialstate" "1"
	"BlockType" "0"
}
; --- Add missing glass to vehicles
{
	"classname" "prop_dynamic"
	"origin" "-840 -1664 -375"
	"angles" "0 15 0"
	"model" "models/props_vehicles/cara_82hatchback_wrecked_glass.mdl"
	"solid" "6"
	"disableshadows" "1"
}


; ###########  ADDITIONAL PROPS AND SPAWNS  ###########
; =====================================================
; ==                      PROPS                      ==
; ==       New props for balance and SI spawns       ==
; =====================================================
add:
; --- Props to spawn behind on the balcony opposite the saferoom ramp
{
	"classname" "prop_dynamic"
	"origin" "961 -351 -368"
	"angles" "0 0 0"
	"model" "models/props_foliage/urban_pot_xlsquare01.mdl"
	"solid" "6"
	"disableshadows" "1"
}
{
	"classname" "prop_dynamic"
	"origin" "962 -350 -368"
	"angles" "0 0 0"
	"model" "models/props_foliage/urban_hedge_128_64_high.mdl"
	"solid" "6"
	"disableshadows" "1"
}
; --- Fence cover to the left by the saferoom
{
	"classname" "prop_dynamic"
	"origin" "119 -829 -376"
	"angles" "0 90 0"
	"model" "models/props_urban/fence_cover001_128.mdl"
	"solid" "6"
	"disableshadows" "1"
}
; --- Prop to get on end saferoom roof
{
	"classname" "prop_dynamic"
	"origin" "-4216 -1082 -130"
	"angles" "40 90 0"
	"model" "models/props_highway/plywood_02.mdl"
	"solid" "6"
	"disableshadows" "1"
}

; =====================================================
; ==             LADDER / ELEVATOR NERF              ==
; ==   Nerf ladder & elevator attacks for infected   ==
; =====================================================


; ############  MAP SOUND AND GFX CHANGES  ############
; =====================================================
; ==                  SOUND REMOVAL                  ==
; ==    Remove or adjust sounds played by the map    ==
; =====================================================

; =====================================================
; ==             GFX / PARTICLES REMOVAL             ==
; ==        Remove visual effects from the map       ==
; =====================================================
;filter:
; --- Remove F18 flyby at the start of the map
;{
;	"targetname" "f18_flyby"
;}


; ###############  TRIGGERS AND BRUSHES  ##############
; =====================================================
; ==                   CLIP REMOVAL                  ==
; ==      Remove miscellaneous clips and brushes     ==
; =====================================================
filter:
; --- Remove the clip that surrounds the saferoom blocking survivors from going in the water
{
	;"hammerid" "1633358"
	"hammerid" "2051"
}
; --- Remove Valve's commentary blockers so we can replace them with our own
add:
;{
;	"classname" "logic_auto"
;	"OnMapSpawn" "env_player_blocker,Kill,,30,-1"
;}
; --- Re-add Valve's blockers copied directly from c5m1_waterfront_commentary.txt, excluding the ones we don't want
; --- Block survivors from jumping over a wall near the start to get on the kitchen
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "16 256 400"
	"maxs" "16 256 5000"
	"mins" "0 0 0"
	"origin" "-1706.12 -248 -243.673"
	"mapupdate" "1"
}
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "128 128 128"
	"maxs" "128 128 5000"
	"mins" "0 0 0"
	"origin" "-2140 -288 -294.972"
	"mapupdate" "1"
}
; --- Block survivors from getting out of bounds behind the kitchen
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "48 48 128"
	"maxs" "48 48 5000"
	"mins" "0 0 0"
	"origin" "-3136 464 -264.871"
	"mapupdate" "1"
}
; --- Clip on blocked route in the bar (never enabled in VS by default)
{
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "0"
	"maxs" "4 28 56"
	"mins" "-4 -28 -56"
	"targetname" "brush_route_cafe"
	"origin" "-1692 -1988 -321"
	"mapupdate" "1"
}
; --- Block survivors from getting on the building by the overturned truck
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "6 512 256"
	"maxs" "6 512 5000"
	"mins" "-4 -384 -80"
	"origin" "-662 -880 -100.086"
	"mapupdate" "1"
}
; --- Block survivors from getting out of bounds by the end saferoom
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "24 8 384"
	"maxs" "24 8 5000"
	"mins" "-24 -8 -80"
	"origin" "-3832 -1144 -250"
	"mapupdate" "1"
}
{
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1"
	;"maxs" "640 8 128"
	"maxs" "640 8 5000"
	"mins" "-660 -80 -80"
	"origin" "-3600 -1245 8"
	"mapupdate" "1"
}
; --- Block players getting stuck out of bounds behind fence by end saferoom - CHANGED TO SURVIVOR ONLY
{
	"classname" "env_player_blocker"
	"initialstate" "1"
	;"maxs" "176 32 256"
	"maxs" "176 32 5000"
	"mins" "-176 -32 -256"
	"origin" "-4080 -1120 -120"
	"mapupdate" "1"
	"BlockType" "1" ; --- Type was originally unspecified, blocking infected too
}

; =====================================================
; ==              TRIGGER REMOVAL / FIX              ==
; ==    Fix triggers that interfere with gameplay    ==
; =====================================================
; --- Disable jukebox to prevent trolling
;modify:
;{
;	match:
;	{
;		"targetname" "jukebox_button"
;	}
;	replace:
;	{
;		"spawnflags" "33"
;	}
;}


; #############  LADDER CHANGES AND FIXES  ############
; =====================================================
; ==             LADDER ADDITIONS / FIXES            ==
; ==              Add or change ladders              ==
; =====================================================
; --- Adjust infected ladder to the right of saferoom to stop players getting stuck on the garage door
modify:
{
	match:
	{
		;"hammerid" "465104"
		"hammerid" "1644"
	}
	insert:
	{
		"origin" "15 0 0"
	}
}
add:
; --- Infected ladder to get from the lower section of roof to the upper section on the left of the saferoom
{
	"classname" "func_simpleladder"
	"origin" "344 3 120"
	"angles" "0 0 0"
	"model" "*13"
	"normal.x" "0.00"
	"normal.y" "1.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladder to get on roof to the right of the waterfront sign near the start
{
	"classname" "func_simpleladder"
	"origin" "-8 1076.90 120"
	"angles" "0 0 0"
	"model" "*4"
	"normal.x" "0.00"
	"normal.y" "1.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladders to get on the roof of the bar building
{
	"classname" "func_simpleladder"
	"origin" "-422 -2101 341"
	"angles" "0 0 0"
	"model" "*18"
	"normal.x" "0.00"
	"normal.y" "1.00"
	"normal.z" "0.00"
	"team" "2"
}
{
	"classname" "func_simpleladder"
	"origin" "-733 -2101 341"
	"angles" "0 0 0"
	"model" "*18"
	"normal.x" "0.00"
	"normal.y" "1.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladder to get on roof with fire escape behind the fence and to stop players getting perma-stuck
{
	"classname" "func_simpleladder"
	"origin" "-618 -3588 171"
	"angles" "0 0 0"
	"model" "*17"
	"normal.x" "-1.00"
	"normal.y" "0.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladders to get on the buildings above the corner by the bar
{
	"classname" "func_simpleladder"
	"origin" "-3476.94 -3646.05 44"
	"angles" "0 180 0"
	"model" "*5"
	"normal.x" "-1.00"
	"normal.y" "0.00"
	"normal.z" "0.00"
	"team" "2"
}
{
	"classname" "func_simpleladder"
	"origin" "-771 -1790 377"
	"angles" "0 90 0"
	"model" "*18"
	"normal.x" "-1.00"
	"normal.y" "0.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladder to get back over the short wall before the alley
{
	"classname" "func_simpleladder"
	"origin" "-415 -2519 -35"
	"angles" "0 90 0"
	"model" "*17"
	"normal.x" "0.00"
	"normal.y" "-1.00"
	"normal.z" "0.00"
	"team" "2"
}
; --- Infected ladder to get on the pink building before the alley
;{
;	"classname" "func_simpleladder"
;	"origin" "-3191 -2274 193"
;	"angles" "0 270 0"
;	"model" "*17"
;	"normal.x" "0.00"
;	"normal.y" "1.00"
;	"normal.z" "0.00"
;	"team" "2"
;}
; --- Infected ladders to climb over the wall at the restaurant exit
;{
;	"classname" "func_simpleladder"
;	"origin" "-111.5 2106 -8"
;	"angles" "0 0 0"
;	"model" "*27"
;	"normal.x" "1.00"
;	"normal.y" "0.00"
;	"normal.z" "0.00"
;	"team" "2"
;}
;{
;	"classname" "func_simpleladder"
;	"origin" "-6304.5 -2353 -8"
;	"angles" "0 180 0"
;	"model" "*27"
;	"normal.x" "-1.00"
;	"normal.y" "0.00"
;	"normal.z" "0.00"
;	"team" "2"
;}
{
    "classname" "func_simpleladder"
    "origin" "-650.03 1123.09 -48.92"
    "angles" "0.00 0.00 0.00"
    "model" "*1"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-5762.97 -1397.99 -50.00"
    "angles" "0.00 180.00 0.00"
    "model" "*1"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}
; --- Infected ladder to stop players getting perma-stuck behind a fence next to the end saferoom
{
	"classname" "func_simpleladder"
	"origin" "-1347 153 -28"
	"angles" "0 0 0"
	"model" "*1"
	"normal.x" "-1.00"
	"normal.y" "0.00"
	"normal.z" "0.00"
	"team" "2"
}


; #######  MISCELLANEOUS / MAP SPECIFIC CHANGES  ######
; =====================================================
; ==                   BLANK HEADER                  ==
; ==                Blank description                ==
; =====================================================

; Harry personal settings
filter:
; intro
{
    "targetname" "lcs_intro"
}
{
    "targetname" "fx_intro"
}

; --- Remove item spawns in bad locations or excessive density in a location
{
	;"origin"     "-2532 72 -332"
	"classname"   "weapon_pain_pills_spawn"
	"hammerid"    "546755"
}

; objects
add:
{
	"solid" "6"
	"origin" "-3705.33 -1315.29 23.74"
	"angles" "0.00 -89.30 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "-3705.33 -1315.29 439.74"
	"angles" "0.00 -89.30 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "-3731.96 -1315.25 23.74"
	"angles" "0.00 -88.45 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "-3731.96 -1315.25 439.74"
	"angles" "0.00 -88.45 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "-3755.24 -1315.80 23.74"
	"angles" "0.00 -0.56 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "-3755.24 -1315.80 439.74"
	"angles" "0.00 -0.56 0.00"
	"model"	 "models/props_docks/dock02_pole02a.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "641.58 900.71 -185.78"
	"angles" "0.00 89.99 27.00"
	"model"	 "models/props_rooftop/acvent01.mdl"
	"classname"	"prop_dynamic"
}

; ladder
{
    "classname" "func_simpleladder"
    "origin" "-2001.59 -409.69 -338.81"
    "angles" "0.00 0.00 0.00"
    "model" "*99"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-550.82 -191.61 -178.18"
    "angles" "0.00 0.00 0.00"
    "model" "*29"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-6987.85 -2598.08 4.28"
    "angles" "0.00 180.00 0.00"
    "model" "*44"        
    "normal.x" "-0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-2485.05 -1727.96 -84.19"
    "angles" "0.00 270.00 0.00"
    "model" "*111"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-632.53 1603.13 -233.87"
    "angles" "0.00 0.00 0.00"
    "model" "*126"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-5968.41 -3004.78 3.03"
    "angles" "0.00 180.00 0.00"
    "model" "*60"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-2363.38 -2635.12 -213.50"
    "angles" "0.00 270.00 0.00"
    "model" "*126"        
    "normal.x" "-0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

; weapons
{
	"solid" "6"
	"classname"	"weapon_pumpshotgun_spawn"
	"origin" "-1716.84 -1873.31 -342.50"
	"angles" "0.00 281.68 270.00"
	"spawnflags"	"2"
	"disableshadows"	"1"
	"count"	"5"
}

; block
{
    "origin" "614 1408 -168"
    "mins" "-1900 0 -500"
    "maxs" "0 0 5000"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_player_blocker"
}

{
    "origin" "-2591 1006 -369"
    "mins" "-1500 0 -500"
    "maxs" "0 0 5000"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_player_blocker"
}

{
    "origin" "-3197 535 -195"
    "mins" "-800 0 0"
    "maxs" "0 0 5000"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}

{
    "origin" "-3813 558 -216"
    "mins" "0 -40 0"
    "maxs" "0 0 5000"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}

{
    "origin" "-3203 -1248 -225"
    "mins" "-530 -40 0"
    "maxs" "0 0 5000"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}

modify:
; npc talk fix
{
    match:
    {
		"message" "c5m1.virgil.intro01"
    }
    replace:
    {
		; Now, I ain't goin' no further, but y'all can make it back to the bridge from here.
        "message" "Virgil_C5Start03"
    }
}
{
    match:
    {
		"message" "c5m1.virgil.intro02"
    }
    replace:
    {
		; Y'all take care now.
        "message" "Virgil_C5Start17"
    }
}
{
    match:
    {
		"message" "c5.intro.boatleave"
    }
    replace:
    {
		; Good luck, now! I'm gonna go look for other survivors!
        "message" "Virgil_C5Start06"
    }
}

; from 9th survivor
; Delete Intro Survivors, Fix Invisible Survivors and No Delete Pistols
filter:
{
	"model" "models/survivors/sv_manager_intro.mdl"
}
{
	"model" "models/survivors/sv_teenangst_intro.mdl"
}
{
	"model" "models/survivors/sv_namvet_intro.mdl"
}
{
	"model" "models/survivors/sv_biker_intro.mdl"
}
{
	"classname" "game_player_equip"
}
{
	"targetname" "i_i_m_e"
}
{
	"targetname" "ptmp_sv_intro"
}
modify:
{
	match:
	{
		"targetname" "rl_invis_wp_e"
	}
	delete:
	{
		"OnTrigger" "weapon_pistol,Kill,,0,-1"
	}
}