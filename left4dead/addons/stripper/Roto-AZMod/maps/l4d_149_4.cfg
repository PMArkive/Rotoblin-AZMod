; Harry Modify 2022

; =====================================================
; ===============  PILL CABINET TWEAK  ================
; =====================================================
; --- set pill cabs to have a max of 1 pill
modify:
{
	match:
	{
		"model" "models/props_interiors/medicalcabinet02.mdl"
	}
	replace:
	{
		"HealthCount" "1"
	}
}

add:
; block nav exploit
{
	"solid" "6"
	"origin" "5314 -3083 -1536"
	"angles" "0 89 0"
	"model"	 "models/props/cs_assault/box_stack2.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5292 -3077 -1475"
	"angles" "0 92 0"
	"model"	 "models/props_fortifications/concrete_barrier01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5383 -3069 -1475"
	"angles" "0 122 0"
	"model"	 "models/props_fortifications/concrete_barrier01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5455 -3087 -1536"
	"angles" "0 177 0"
	"model"	 "models/props/cs_assault/box_stack2.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "4903 -1601 -1588"
	"angles" "0 -90 0"
	"model"	 "models/props_wasteland/exterior_fence002c.mdl"
	"classname"	"prop_dynamic"
}

; ammo
{
	"solid" "6"
	"origin" "2250 -614 -1792"
	"angles" "0 -178 0"
	"model"	 "models/props/terror/ammo_stack.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "4712 -1224 -1536"
	"angles" "0 -5 0"
	"model"	 "models/props/terror/ammo_stack.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "3337 -2029 -1792"
	"angles" "0 79 0"
	"model"	 "models/props/terror/ammo_stack.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "5435 -3486 -1456"
	"angles" "0 173 0"
	"model"	 "models/props_unique/spawn_apartment/coffeeammo.mdl"
	"classname" "weapon_ammo_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

; weapons
{
	"solid" "6"
	"origin" "3378 -2030 -1790"
	"angles" "0 1 90"
	"classname" "weapon_pistol_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "1"
}

{
	"solid" "6"
	"origin" "3330 -1958 -1790"
	"angles" "0 7 270"
	"classname" "weapon_rifle_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "5"
}

{
	"solid" "6"
	"origin" "3259 -2033 -1790"
	"angles" "0 322 270"
	"classname" "weapon_autoshotgun_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "5"
}

{
	"solid" "6"
	"origin" "3354 -2087 -1790"
	"angles" "0 187 270"
	"classname" "weapon_hunting_rifle_spawn"
	"disableshadows" "1"
	"spawnflags" "2"
	"count" "5"
}

; objects
{
	"solid" "6"
	"origin" "5480 -3024 -1217"
	"angles" "0 181 0"
	"model"	 "models/props_rooftop/gutter_pipe_128.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5818 -4365 -1472"
	"angles" "0 -178 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}
{
	"solid" "6"
	"origin" "5440 -3031 -1346"
	"angles" "0 0 -39"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5561 -3171 -1345"
	"angles" "0 -90 -37"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5561 -3098 -1344"
	"angles" "0 -90 -38"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5441 -2986 -1374"
	"angles" "1 -174 31"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5559 -3244 -1346"
	"angles" "0 269 -36"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5559 -3312 -1346"
	"angles" "0 269 -36"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5350 -3067 -1341"
	"angles" "0 0 -45"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5561 -3032 -1345"
	"angles" "0 -4 -34"
	"model"	 "models/props_highway/plywood_01.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "5572 -3016 -1368"
	"angles" "318 -118 270"
	"model"	 "models/props_interiors/handrail_hospital01_32.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "3009 -1583 -1782"
	"angles" "0 -40 -10"
	"model"	 "models/props/cs_assault/box_stack1.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "3158 -1483 -1792"
	"angles" "0 228 0"
	"model"	 "models/props/cs_militia/boxes_garage_lower.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "3120 -1288 -1792"
	"angles" "0 2 0"
	"model"	 "models/props/de_nuke/crate_small.mdl"
	"classname"	"prop_dynamic"
}

{
	"solid" "6"
	"origin" "3175 -1270 -1792"
	"angles" "0 -177 0"
	"model"	 "models/props_crates/static_crate_40.mdl"
	"classname"	"prop_dynamic"
}

; infected ladder
{
    "classname" "func_simpleladder"
    "origin" "589.06 -864.96 250.09"
    "angles" "0.00 0.00 0.00"
    "model" "*76"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "230.81 -1606.31 195.89"
    "angles" "0.00 0.00 0.00"
    "model" "*201"        
    "normal.x" "-0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-1587.33 640.96 -31.42"
    "angles" "0.00 -8.00 0.00"
    "model" "*178"        
    "normal.x" "0.99"
    "normal.y" "-0.13"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-1886.92 -928.11 -27.50"
    "angles" "0.00 15.00 0.00"
    "model" "*178"        
    "normal.x" "0.96"
    "normal.y" "0.25"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "2304.23 826.80 -28.50"
    "angles" "0.00 -50.00 0.00"
    "model" "*172"        
    "normal.x" "-0.64"
    "normal.y" "0.76"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "1316.37 427.00 -27.50"
    "angles" "0.00 -30.00 0.00"
    "model" "*172"        
    "normal.x" "-0.86"
    "normal.y" "0.50"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-2159.03 830.67 -249.42"
    "angles" "0.00 0.00 0.00"
    "model" "*69"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "-1626.40 1152.96 205.06"
    "angles" "0.00 0.00 0.00"
    "model" "*72"        
    "normal.x" "0.00"
    "normal.y" "-1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "1691.15 -143.24 41.04"
    "angles" "0.00 0.00 0.00"
    "model" "*144"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "1250.36 1446.69 79.44"
    "angles" "0.00 0.00 0.00"
    "model" "*200"        
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    "classname" "func_simpleladder"
    "origin" "1497.96 -328.72 -30.96"
    "angles" "0.00 0.00 0.00"
    "model" "*151"        
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}


filter:
; remove end saferoom kits
{
	"hammerid" "3009"
}
{
	"hammerid" "3008"
}
{
	"hammerid" "3011"
}
{
	"hammerid" "3012"
}

; unbreakable door
;{
;	;"origin" "5232 -3292 -1404"
;	"hammerid" "2479"
;}
;{
;	;"origin" "7788 -124 -1440"
;	"hammerid" "2629"
;}
;{
;	;"origin" "6236 548 -1312"
;	"hammerid" "2693"
;}
;{
;	;"origin" "5039.76 -387.76 -1312"
;	"hammerid" "2746"
;}
;{
;	;"origin" "2148 -836 -1792"
;	"hammerid" "2844"
;}
;{
;	;"origin" "1850 -2696 -1724"
;	"hammerid" "3092"
;}
;{
;	;"origin" "2524 -972 -1408"
;	"hammerid" "2891"
;}
;{
;	;"origin" "5900 -2244 -1536"
;	"hammerid" "2968"
;}
; remove infected ladder due to new objects
{
	;"model" "*71"
	"hammerid" "3136"
}
; broken infected ladder
{
	;"model" "*189"
	"hammerid" "3946"
}
{
	;"model" "*187"
	"hammerid" "3942"
}
{
	;"model" "*195"
	"hammerid" "3973"
}
{
	;"model" "*193"
	"hammerid" "3969"
}
; remove tank spawn
{
	"targetname" "tank_trigger_1"
}
{
	"targetname" "tank_trigger_2"
}
{
	"targetname" "tank_trigger_3"
}
; remove handtruck
{
	;"origin" "2848 -1182 -1792"
	"hammerid" "2953"
}

; --- Remove item spawns in bad locations or excessive density in a location
; by harry
{
	"hammerid" "20551"
}
{
	"hammerid" "20477"
}
{
	"hammerid" "2888"
}
{
	"hammerid" "3055"
}

modify:
; hittable
{
	match:
	{
		;"origin" "8606 883 -1456"
		"model" "models/props/cs_assault/forklift.mdl"
		"hammerid" "2447"
		"classname" "prop_dynamic_override"
	}
	replace:
	{
		"classname" "prop_physics"
	}
}
{
	match:
	{
		;"origin" "5526 -1648 -1536"
		"model" "models/props/cs_assault/forklift.mdl"
		"hammerid" "2949"
		"classname" "prop_dynamic_override"
	}
	replace:
	{
		"classname" "prop_physics"
	}
}

add:
; block before event
{
    ; invisible block between fire
    "origin" "5517 -3995 -1426"
    "mins" "0 -600 0"
    "maxs" "0 0 1000"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
	"targetname" "sprinkler_block"
}

modify:
; remove block after event trigger
{
	match:
	{
		;"classname" "logic_relay"
		"targetname" "sprinkler_relay"
	}
	delete:
	{
		"OnTrigger" "heat_hurt,Disable,,11,-1"
		"OnTrigger" "fire_off,Trigger,,10,-1"
		"OnTrigger" "heat_light,TurnOff,,11,-1"
		"OnTrigger" "blocker_fire,UnblockNav,,11,-1"
		"OnTrigger" "sprinklers_off,Trigger,,20,-1"
		"OnTrigger" "heat_water_sfx,StopSound,,20,-1"
	}
	insert:
	{
		; +20s delay
		"OnTrigger" "heat_hurt,Disable,,31,-1"
		"OnTrigger" "fire_off,Trigger,,30,-1"
		"OnTrigger" "heat_light,TurnOff,,31,-1"
		"OnTrigger" "blocker_fire,UnblockNav,,31,-1"
		"OnTrigger" "sprinklers_off,Trigger,,40,-1"
		"OnTrigger" "heat_water_sfx,StopSound,,40,-1"
		"OnTrigger" "sprinkler_block,kill,,30,-1"
	}
}